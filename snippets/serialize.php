<?php

class Example2
{
   private $hook;

   public function __construct($hook)
   {
      $this->hook = $hook;
   }

   public function __wakeup()
   {
	echo "running wakeup...\n";
      	if (isset($this->hook))
	{
		echo "evaluating hook\n";
		eval($this->hook);
	}
   }
}

$shell_cmd = "open /Applications/Calculator.app/";	// works on mac os x

$obj = new Example2("shell_exec('$shell_cmd');");

$arr = array("test", $obj);	// doesn't have to be in an array
$ser = serialize($arr);

$unser = unserialize($ser);


?>
